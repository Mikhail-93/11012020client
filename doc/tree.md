# Методы для работы с  копным деревом

## POST api/users/putForemanRequest

Подать/отменить заявку от имени текущего пользователя на выбор другого пользователя старшиной.

__Тело__
 
|Название   |Тип                   |Описание
|-----------|----------------------|--------
|id         |Number\|null          | Идентификатор старшины. Если `null`, отменяет заявку 

__Ошибки__

|Код         |Сообщение            |Описание
|------------|---------------------|--------
|1000+401    |Unauthorized         | Пользователь не аутентифицирован
|1000+403    |Forbidden            | Пользователь не является заверенным или его роль не (Копник или Копник по Данилову или Стремящийся в копники) 
|1000+510    |Invalid Foreman      | Старшина не является заверенным пользователем или его роль не Копник и не Копник по Данилову

## GET api/users/getForemanRequests

Получить заявки других пользователей на выбор текущего пользователя своим старшиной.

__Ошибки__

|Код         |Сообщение         |Описание
|------------|------------------|--------
|1000+401    |Unauthorized      | Пользователь не аутентифицирован

__Ответ__
 
 аналогичен методу ```users/get```
 
## POST api/users/confirmForemanRequest

Одобрить заявку другого пользователя на выбор текущего пользователя старшиной.

__Тело__
 
|Название   |Тип                   |Описание
|-----------|----------------------|--------
|id         |Number                | Идентификатор пользователя, подавшего заявку

__Ошибки__

|Код         |Сообщение            |Описание
|------------|---------------------|--------
|1000+401    |Unauthorized         | Пользователь не аутентифицирован
|1000+511    |Invalid Subordinate Request | Неверная заявка на выбор старшины

## POST api/users/declineForemanRequest

Отклонить заявку другого пользователя на выбор текущего пользователя старшиной.

__Тело__
 
|Название   |Тип                   |Описание
|-----------|----------------------|--------
|id         |Number                | Идентификатор пользователя, подавшего заявку

__Ошибки__

|Код         |Сообщение            |Описание
|------------|---------------------|--------
|1000+401    |Unauthorized         | Пользователь не аутентифицирован
|1000+511    |Invalid Subordinate Request | Неверная заявка на выбор старшины

## POST api/users/resetForeman?[id=1234]

Отменить выбор старшины. Метод имеет двойное значение в зависимости от того присутствует параметр `id` или нет. 

Если парамер присутствует, метод имеет значение: текущий пользователь исключает указанного в `id` пользователя из подчиненных. 

Если параметр отсутствует, метод имеет следующеее значение: текущий пользователь выходит из подчиненния своего текущего старшины.

__Параметры__
 
|Название   |Тип              |Описание
|-----------|-----------------|--------
|id         |Number           | Идентификатор подчиненного пользователя. Если `null`, старшина сбрасывается у текущего пользователя.

__Ошибки__

|Код         |Сообщение         |Описание
|------------|------------------|--------
|1000+401    |Unauthorized      | Пользователь не аутентифицирован
|1000+512    |Invalid Subordinate| Пользователь не в подчиненнии

## GET api/users/getSubordinates?id=1234

Получить подчиненных пользователя. 
// Если параметр `id===null`, метод работает для текущего пользователя.
 
__Параметры__
  
|Название   |Тип              |Описание
|-----------|-----------------|--------
|id         |Number           | Идентификатор пользователя. // Значение `null` аналогично текущему пользователю
 
__Ошибки__

|Код         |Сообщение         |Описание
|------------|------------------|--------
|1000+401    |Unauthorized      | Пользователь не аутентифицирован

__Ответ__
 
 аналогичен методу ```users/get```
 
## GET api/users/getAllSubordinates?id=1234

Получить подчиненных пользователя включая подчиненных прямых подчиненных. // Если параметр `id===null`, метод работает для текущего пользователя.
 
__Параметры__
  
|Название   |Тип              |Описание
|-----------|-----------------|--------
|id         |Number           | Идентификатор пользователя. Значение `null` аналогично текущему пользователю
 
__Ошибки__

|Код         |Сообщение         |Описание
|------------|------------------|--------
|1000+401    |Unauthorized      | Пользователь не аутентифицирован

__Ответ__
 
 аналогичен методу ```users/get```

## GET api/users/getForeman?id=1234

Получить старшину пользователя. 
// Если параметр `id===null`, метод работает для текущего пльзователя.

__Параметры__
 
|Название   |Тип              |Описание
|-----------|-----------------|--------
|id         |Number           | Идентификатор пользователя. // Значение `null` аналогично текущему пользователю

__Ошибки__

|Код         |Сообщение         |Описание
|------------|------------------|--------
|1000+401    |Unauthorized      | Пользователь не аутентифицирован

__Ответ__
 
 аналогичен методу ```users/get```
 
 ## GET api/users/getAllForemans?id=1234

Получить всех старшин пользователя в порядке близости по копному дереву (непосредственный старшина идет первым в списке). 
// Если параметр `id===null`, метод работает для текущего пльзователя.

__Параметры__
 
|Название   |Тип              |Описание
|-----------|-----------------|--------
|id         |Number           | Идентификатор пользователя. // Значение `null` аналогично текущему пользователю

__Ошибки__

|Код         |Сообщение         |Описание
|------------|------------------|--------
|1000+401    |Unauthorized      | Пользователь не аутентифицирован

__Ответ__
 
 аналогичен методу ```users/get``` 

